/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/helper/imageLink.tsx":
/*!**********************************!*\
  !*** ./src/helper/imageLink.tsx ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deleteImageUrl: () => (/* binding */ deleteImageUrl),
/* harmony export */   pauseImageUrl: () => (/* binding */ pauseImageUrl),
/* harmony export */   playImageUrl: () => (/* binding */ playImageUrl),
/* harmony export */   youTubeIconLink: () => (/* binding */ youTubeIconLink)
/* harmony export */ });
const youTubeIconLink = 'data:image/png;base64,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';
const playImageUrl = '../assets/resource/play.png';
const pauseImageUrl = '../assets/resource/pause.png';
const deleteImageUrl = '../assets/resource/delete.png';


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {
/*!****************************************!*\
  !*** ./src/content/content_scripts.ts ***!
  \****************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _helper_imageLink__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helper/imageLink */ "./src/helper/imageLink.tsx");
/**
 * Scrapes YouTube video player data (current timestamp, video duration, and seek bar position) and sends it to the background script via chrome.runtime.sendMessage.
 * The data is scraped from the YouTube video player's progress bar and seek bar elements.
 * @returns {void}
 */

const handleDataScraping = () => {
    const data = {
        minValue: "",
        maxValue: "",
        value: "",
        duration: "",
        position: "",
    };
    const timeTrackerElement = document.querySelector('[class="ytp-progress-bar"]');
    if (timeTrackerElement) {
        data.minValue = timeTrackerElement.ariaValueMin || "";
        data.maxValue = timeTrackerElement.ariaValueMax || "";
        data.value = timeTrackerElement.ariaValueNow || "";
        data.duration = timeTrackerElement.ariaValueText || "";
    }
    const positionTrackerElement = document.querySelector('[class^="ytp-play-progress ytp-swatch-background-color"]');
    if (positionTrackerElement) {
        const computedStyles = window.getComputedStyle(positionTrackerElement);
        // const transformValue: string = computedStyles.getPropertyValue("transform");
        // if (transformValue && transformValue.startsWith("matrix")) {
        //   const matrixValue = parseFloat(
        //     transformValue.match(/matrix\(([^,]+)/)?.[1] ?? "0"
        //   );
        data.position = "";
        // }
    }
    chrome.runtime.sendMessage({ type: "scrapeData", data: data });
};
/**
 * Creates an image element with a YouTube bookmark icon and inserts it into the DOM right after the video controls.
 * The element is inserted as the first child of the element with a class name that starts with "ytp-right-controls".
 * If no such element is found, the element is appended to the end of the parent element.
 */
const handleDocumentMutations = () => {
    const entity = document.querySelector('[class^="ytp-right-controls"]');
    if (entity) {
        const image = document.createElement("img");
        image.src = _helper_imageLink__WEBPACK_IMPORTED_MODULE_0__.youTubeIconLink;
        image.style.marginBottom = "15px";
        image.style.marginRight = "10px";
        image.style.cursor = "pointer";
        image.style.width = "20px";
        image.style.height = "20px";
        image.onclick = () => handleDataScraping();
        const firstChilde = entity.firstChild;
        if (firstChilde) {
            entity.insertBefore(image, firstChilde);
        }
        else {
            entity.appendChild(image);
        }
    }
};
handleDocumentMutations();

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudF9zY3JpcHRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQU8sd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTs7Ozs7OztVQ0hQO1VBQ0E7O1VBRUE7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDdEJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EseUNBQXlDLHdDQUF3QztXQUNqRjtXQUNBO1dBQ0E7Ozs7O1dDUEE7Ozs7O1dDQUE7V0FDQTtXQUNBO1dBQ0EsdURBQXVELGlCQUFpQjtXQUN4RTtXQUNBLGdEQUFnRCxhQUFhO1dBQzdEOzs7Ozs7Ozs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnQ0FBZ0M7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOERBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaGVscGVyL2ltYWdlTGluay50c3giLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRlbnQvY29udGVudF9zY3JpcHRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB5b3VUdWJlSWNvbkxpbmsgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFMd0FBQUNVQ0FNQUFBQWVhTFBDQUFBQXlWQk1WRVgvLy8vL0xrMGVGMGtkRmtvZ0ZrdXpzcjBTRWpUeU1FMFRGRWx2SGtvQUFBRDcrL3NSRlVsQUZrbllMVTcvLy8wQUFERUFFa2dBQUN1dHJMUHU3ZklWQzBhN3VjVVZGUzMxOWZlam9hMEFBQkljSENmL05sQWZFMHNGQURveEwwTU5BemdvRmtoZ0cwblFMRTJzSjA2VklVa0lFRXBLR0VuZ01FeFhGMGd4RmtnUkJqMDhQRk1BQUNkMGMzcTRLRXlRa0pMQ3djY0FGRVJVVkdIaDRPWFIwTmdBQUNFUkFFTWVHenFFZ3BGbFpIV1BKRTVKU1ZvQUFCbVhscDlBUGs4bUpUOTdIVWpCS1Vtd1BWRjFBQUFFNzBsRVFWUjRuTzJjRFZmYU1CU0dZNUxaWWl1bElLNnlWcENQQW5iQ0VCRFlHSXIvLzBmdEptM3AvRUsybGRETys1NkRxTFQxNmVYbUppL0hYRUpRS0JRS2hVS2hVQ2pVaDVLeEJ5bkF0a0JHcFg2U3V1b1ZRMXg3N3pkd1VXc3d6bEpXbzNheGQzQ0l6ZG1YS3FkcHMxTmUvWEpHOWh4NXVQejVaMFlwVDFsd3hjL24rNFlIZlRybWtEWHc1K0FlMHBBSWhiamc4YWQ5azhmd0hpUk9TcmtqcnVRcGhSY1JNMU9TZUFkVndrT3c2TlZwU3JxaTRqMVVDbTgyVzhWVTFHcWFhdUU1bzNwQk8wcEZXa0duYWdjc3dpUDhuOE96dE9GeHdDSTh3aU04d21jS0h1djg3L0NZTmg4Q25xY0x6ekh5dThMVGRPR1ZHdkI4Uno3UE9aL3ZTUXB6UG9ISFNRcmhFUjdoRVI3aEVSN2hFZjVEd3VmWmpPUTc4cmsySTVnMkNUeFdHNFJIZUlSSGVJUkhlSVJIK0wrRngxVmxBbzltWkdmNFhFY2VjejZCeDFLSjhQOEJ2QnMrb3FlY3dXdXVxN1U3bmJaNHpoMjg2eFlMdm0zN2hhS2J2OGdmRmJzMjFHOXFkNHZiajhzZ3ZOdjI1VDl6d0lGKzI5Mlc5OW1EMXpxMnp1VUdRczUxdTZQbENiNVhzSk05WUpUYWhkNlcrOHdZZkt0dmk0VmlKRTY1M1c5bEhWNldGZGQxaDllbVNKZDQ4NTlJSC9ONjZFWXZaeFErdklPamptNktkYWRZOVhzZWpiNDFienR2NUgxV3pJaW9LaHFrdTl6Z0NzRVB2bjROeExOTWY3K2d2VnAxTW1SR2luMC8zQ0lLUjl3TUpwUEJqUzd2Qkc3WDc3OWE4VE5qUnR3aHpFeGlqeWc4Z3RJM2h4RG5XeWtJZjRhaTB4MitramtaTUNPdUhJb2RUNWM3WEdHWUJzY3J1YVBlV0IwSGNzc3V2S0I3bmZEUTdPVzhHLzJIcE1EM0xoOUc4UW1qaDBzdi9qMmM1VDRyT05uSStkN3BMZVBock1UTDR3a2hja2MzZkptTXkxenVlUVhHMjlQbjgxVUdTaVZVOTFQVG8rRyszS0EwT0FQcUNONGlad09SK0V4dU9UYXZIek1GTDlKQWEzTXozdEU5bTYrZW43UjZtSVhERnVhcnEvWVRoM0xveUlQZktIQ1RSaDBNU3Zmbnh0TW1BSlpsbk4rWHd0UmgxT1JyN2JlOFB6aDhyK25UQ0kzZkxLY2t5dmNOUER5bXkzSTRXVkdtMjgxZVp1QmQ4QjF4VW5oM1k0ZTg2TDRnZm5iR2QxN2NLOERzRmpPU05vbnZFT20rZVB2TXhYeEd2WTFEaWZQK29QQ0o3NkRzc2w1eDN1cVZZbGxPcFg0WnZqK2hRM0VQSG5ud0hUU2FnbmhwUE5wNnFqVWFsM2pjWndJY3lxRWpYK3pIbm9ueTJ2ZUpZYnpkYkVTOEpaUHZ0WVErWEtpcFg5dHdac3FKZnNoTVdMVkwzMUU5V1Roa2U1c1VvSGNXSjFVNVdjRkszMlNQc3NxSzViL1N0WTJFUC9waG05SnF3Q296bUZmSXl6THpBcDZReWp5ZzBVbW0vVU5FSHU1ZkpUekVEdUMxdFMxR3F2UWRqZVhJc3Q0SlBBa3IvbWpaaUJ3S3AvNjZCMmtqRWs5cHpwdnJWak95MmNEeGN6QWx4bnVCbDYvREVkUEJ6OWlhVTcvWld1dE04YXFTc1c3ZkRwZnVqSWErZzVCZElpOE9lZUpRK2wxeEcycHpudXQ2OUtrTURjb3I1OCt1NGF6S2lVUFJ1ZUxJMDgzbk10U2IxVWZ2aC95cExES3F6MktId2hVMzU1RzFNV0pQZk1mdUNoMUtSRTlWdzIvNk1RV054SGZzcnRDaE5JTE5aNExLNGNWNHE4NVhmOTI0emxqTk53NUZhWjJQZlVmOXVlL1lYY0toMUV0c3N6QlNISGwrYy8vQ2Qrd3U2VkR1STRlaWVHM0RPQXhWZy94RHMwQnhxZ0hEVmxua1pmczdVUjBvMytvN2R0ZmlvUnArNkxELzluZHg0MEZLaGUvNDk3OEd5OHpJb1Nob1BDaDBVUXNvdTF0T1UrcVBhVXlYWUc3VnRIeU1tbTB1SnU4dnczYThJSmtzMURYYmxHMU9NMzVCRkFxRlFxRlFLQlFLbFhYOUF2ZE9vVmYzV2tkZEFBQUFBRWxGVGtTdVFtQ0MnO1xuZXhwb3J0IGNvbnN0IHBsYXlJbWFnZVVybCA9ICcuLi9hc3NldHMvcmVzb3VyY2UvcGxheS5wbmcnO1xuZXhwb3J0IGNvbnN0IHBhdXNlSW1hZ2VVcmwgPSAnLi4vYXNzZXRzL3Jlc291cmNlL3BhdXNlLnBuZyc7XG5leHBvcnQgY29uc3QgZGVsZXRlSW1hZ2VVcmwgPSAnLi4vYXNzZXRzL3Jlc291cmNlL2RlbGV0ZS5wbmcnO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvKipcbiAqIFNjcmFwZXMgWW91VHViZSB2aWRlbyBwbGF5ZXIgZGF0YSAoY3VycmVudCB0aW1lc3RhbXAsIHZpZGVvIGR1cmF0aW9uLCBhbmQgc2VlayBiYXIgcG9zaXRpb24pIGFuZCBzZW5kcyBpdCB0byB0aGUgYmFja2dyb3VuZCBzY3JpcHQgdmlhIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlLlxuICogVGhlIGRhdGEgaXMgc2NyYXBlZCBmcm9tIHRoZSBZb3VUdWJlIHZpZGVvIHBsYXllcidzIHByb2dyZXNzIGJhciBhbmQgc2VlayBiYXIgZWxlbWVudHMuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuaW1wb3J0IHsgeW91VHViZUljb25MaW5rIH0gZnJvbSBcIi4uL2hlbHBlci9pbWFnZUxpbmtcIjtcbmNvbnN0IGhhbmRsZURhdGFTY3JhcGluZyA9ICgpID0+IHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBtaW5WYWx1ZTogXCJcIixcbiAgICAgICAgbWF4VmFsdWU6IFwiXCIsXG4gICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICBkdXJhdGlvbjogXCJcIixcbiAgICAgICAgcG9zaXRpb246IFwiXCIsXG4gICAgfTtcbiAgICBjb25zdCB0aW1lVHJhY2tlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbY2xhc3M9XCJ5dHAtcHJvZ3Jlc3MtYmFyXCJdJyk7XG4gICAgaWYgKHRpbWVUcmFja2VyRWxlbWVudCkge1xuICAgICAgICBkYXRhLm1pblZhbHVlID0gdGltZVRyYWNrZXJFbGVtZW50LmFyaWFWYWx1ZU1pbiB8fCBcIlwiO1xuICAgICAgICBkYXRhLm1heFZhbHVlID0gdGltZVRyYWNrZXJFbGVtZW50LmFyaWFWYWx1ZU1heCB8fCBcIlwiO1xuICAgICAgICBkYXRhLnZhbHVlID0gdGltZVRyYWNrZXJFbGVtZW50LmFyaWFWYWx1ZU5vdyB8fCBcIlwiO1xuICAgICAgICBkYXRhLmR1cmF0aW9uID0gdGltZVRyYWNrZXJFbGVtZW50LmFyaWFWYWx1ZVRleHQgfHwgXCJcIjtcbiAgICB9XG4gICAgY29uc3QgcG9zaXRpb25UcmFja2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tjbGFzc149XCJ5dHAtcGxheS1wcm9ncmVzcyB5dHAtc3dhdGNoLWJhY2tncm91bmQtY29sb3JcIl0nKTtcbiAgICBpZiAocG9zaXRpb25UcmFja2VyRWxlbWVudCkge1xuICAgICAgICBjb25zdCBjb21wdXRlZFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBvc2l0aW9uVHJhY2tlckVsZW1lbnQpO1xuICAgICAgICAvLyBjb25zdCB0cmFuc2Zvcm1WYWx1ZTogc3RyaW5nID0gY29tcHV0ZWRTdHlsZXMuZ2V0UHJvcGVydHlWYWx1ZShcInRyYW5zZm9ybVwiKTtcbiAgICAgICAgLy8gaWYgKHRyYW5zZm9ybVZhbHVlICYmIHRyYW5zZm9ybVZhbHVlLnN0YXJ0c1dpdGgoXCJtYXRyaXhcIikpIHtcbiAgICAgICAgLy8gICBjb25zdCBtYXRyaXhWYWx1ZSA9IHBhcnNlRmxvYXQoXG4gICAgICAgIC8vICAgICB0cmFuc2Zvcm1WYWx1ZS5tYXRjaCgvbWF0cml4XFwoKFteLF0rKS8pPy5bMV0gPz8gXCIwXCJcbiAgICAgICAgLy8gICApO1xuICAgICAgICBkYXRhLnBvc2l0aW9uID0gXCJcIjtcbiAgICAgICAgLy8gfVxuICAgIH1cbiAgICBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7IHR5cGU6IFwic2NyYXBlRGF0YVwiLCBkYXRhOiBkYXRhIH0pO1xufTtcbi8qKlxuICogQ3JlYXRlcyBhbiBpbWFnZSBlbGVtZW50IHdpdGggYSBZb3VUdWJlIGJvb2ttYXJrIGljb24gYW5kIGluc2VydHMgaXQgaW50byB0aGUgRE9NIHJpZ2h0IGFmdGVyIHRoZSB2aWRlbyBjb250cm9scy5cbiAqIFRoZSBlbGVtZW50IGlzIGluc2VydGVkIGFzIHRoZSBmaXJzdCBjaGlsZCBvZiB0aGUgZWxlbWVudCB3aXRoIGEgY2xhc3MgbmFtZSB0aGF0IHN0YXJ0cyB3aXRoIFwieXRwLXJpZ2h0LWNvbnRyb2xzXCIuXG4gKiBJZiBubyBzdWNoIGVsZW1lbnQgaXMgZm91bmQsIHRoZSBlbGVtZW50IGlzIGFwcGVuZGVkIHRvIHRoZSBlbmQgb2YgdGhlIHBhcmVudCBlbGVtZW50LlxuICovXG5jb25zdCBoYW5kbGVEb2N1bWVudE11dGF0aW9ucyA9ICgpID0+IHtcbiAgICBjb25zdCBlbnRpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbY2xhc3NePVwieXRwLXJpZ2h0LWNvbnRyb2xzXCJdJyk7XG4gICAgaWYgKGVudGl0eSkge1xuICAgICAgICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIGltYWdlLnNyYyA9IHlvdVR1YmVJY29uTGluaztcbiAgICAgICAgaW1hZ2Uuc3R5bGUubWFyZ2luQm90dG9tID0gXCIxNXB4XCI7XG4gICAgICAgIGltYWdlLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIxMHB4XCI7XG4gICAgICAgIGltYWdlLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICBpbWFnZS5zdHlsZS53aWR0aCA9IFwiMjBweFwiO1xuICAgICAgICBpbWFnZS5zdHlsZS5oZWlnaHQgPSBcIjIwcHhcIjtcbiAgICAgICAgaW1hZ2Uub25jbGljayA9ICgpID0+IGhhbmRsZURhdGFTY3JhcGluZygpO1xuICAgICAgICBjb25zdCBmaXJzdENoaWxkZSA9IGVudGl0eS5maXJzdENoaWxkO1xuICAgICAgICBpZiAoZmlyc3RDaGlsZGUpIHtcbiAgICAgICAgICAgIGVudGl0eS5pbnNlcnRCZWZvcmUoaW1hZ2UsIGZpcnN0Q2hpbGRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVudGl0eS5hcHBlbmRDaGlsZChpbWFnZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuaGFuZGxlRG9jdW1lbnRNdXRhdGlvbnMoKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==