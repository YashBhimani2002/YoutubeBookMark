/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/helper/imageLink.tsx":
/*!**********************************!*\
  !*** ./src/helper/imageLink.tsx ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   closeImageUrl: () => (/* binding */ closeImageUrl),
/* harmony export */   deleteImageUrl: () => (/* binding */ deleteImageUrl),
/* harmony export */   pauseImageUrl: () => (/* binding */ pauseImageUrl),
/* harmony export */   playImageUrl: () => (/* binding */ playImageUrl),
/* harmony export */   righterImageUrl: () => (/* binding */ righterImageUrl),
/* harmony export */   youTubeIconLink: () => (/* binding */ youTubeIconLink)
/* harmony export */ });
const youTubeIconLink = 'data:image/png;base64,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';
const playImageUrl = '../assets/resource/play.png';
const pauseImageUrl = '../assets/resource/pause.png';
const deleteImageUrl = '../assets/resource/delete.png';
const closeImageUrl = '../assets/resource/close.png';
const righterImageUrl = '../assets/resource/corecte.png';


/***/ }),

/***/ "./src/helper/injectComponent.tsx":
/*!****************************************!*\
  !*** ./src/helper/injectComponent.tsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handleBookMarkPointer: () => (/* binding */ handleBookMarkPointer),
/* harmony export */   multipleInjectPointer: () => (/* binding */ multipleInjectPointer)
/* harmony export */ });
const handleBookMarkPointer = (position) => {
    console.log(position);
    let progressBarContainer = document.querySelector(".ytp-progress-bar-container");
    let dot = document.createElement("div");
    dot.style.position = "absolute";
    dot.style.top = "0px"; // Align it to the top of the progress bar
    dot.style.left = `${position}px`; // Place the dot at the correct position
    dot.style.width = "3px"; // Dot size
    dot.style.height = "5px";
    dot.style.backgroundColor = "yellow";
    dot.style.zIndex = "10"; // Ensure it's above the progress bar
    // Append the dot to the progress bar container
    progressBarContainer.appendChild(dot);
};
const multipleInjectPointer = (data) => {
    data.forEach((bookmark) => {
        console.log(bookmark);
        // Send a message to background script to get the current tab URL
        chrome.runtime.sendMessage({ action: 'getCurrentTabUrl' }, (response) => {
            let tabUrl = response.url; // Get the tab URL from the response
            let bookMarkUrl = bookmark.url;
            // Remove any timestamp parameters from both the current tab URL and the bookmark URL
            if (tabUrl === null || tabUrl === void 0 ? void 0 : tabUrl.includes("&t")) {
                tabUrl = tabUrl.split("&t")[0];
            }
            bookMarkUrl = bookMarkUrl.split("&t")[0];
            console.log(tabUrl, bookMarkUrl);
            // Check if the URLs match
            if (tabUrl === bookMarkUrl) {
                handleBookMarkPointer(bookmark.position);
            }
        });
    });
};


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {
/*!****************************************!*\
  !*** ./src/content/content_scripts.ts ***!
  \****************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handleStorePointerOnVideoLoad: () => (/* binding */ handleStorePointerOnVideoLoad)
/* harmony export */ });
/* harmony import */ var _helper_imageLink__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helper/imageLink */ "./src/helper/imageLink.tsx");
/* harmony import */ var _helper_injectComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helper/injectComponent */ "./src/helper/injectComponent.tsx");
/**
 * Scrapes YouTube video player data (current timestamp, video duration, and seek bar position) and sends it to the background script via chrome.runtime.sendMessage.
 * The data is scraped from the YouTube video player's progress bar and seek bar elements.
 * @returns {void}
 */


const handleDataScraping = () => {
    const data = {
        minValue: "",
        maxValue: "",
        value: "",
        duration: "",
        position: "",
    };
    const timeTrackerElement = document.querySelector('[class="ytp-progress-bar"]');
    if (timeTrackerElement) {
        data.minValue = timeTrackerElement.ariaValueMin || "";
        data.maxValue = timeTrackerElement.ariaValueMax || "";
        data.value = timeTrackerElement.ariaValueNow || "";
        data.duration = timeTrackerElement.ariaValueText || "";
    }
    const positionTrackerElement = document.querySelector('[class^="ytp-play-progress ytp-swatch-background-color"]');
    if (positionTrackerElement) {
        let video = document.querySelector("video");
        let currentTime = video.currentTime;
        let progressBarContainer = document.querySelector(".ytp-progress-bar-container");
        let progressBarWidth = progressBarContainer.offsetWidth;
        let videoDuration = video.duration; // Get the video duration
        let position = (currentTime / videoDuration) * progressBarWidth;
        console.log(position, "position", currentTime, video, progressBarContainer);
        (0,_helper_injectComponent__WEBPACK_IMPORTED_MODULE_1__.handleBookMarkPointer)(position);
        data.position = position.toString() || "";
    }
    chrome.runtime.sendMessage({ type: "scrapeData", data: data });
};
/**
 * Creates and places a yellow dot on the YouTube video progress bar at a specified position.
 *
 * @param {Object} progressBarContainer - The container element of the progress bar where the dot will be appended.
 * @param {number | GLfloat | string} position - The position on the progress bar where the dot should be placed.
 * The position can be a number, GLfloat, or string representing the pixel offset from the left.
 */
/**
 * Creates an image element with a YouTube bookmark icon and inserts it into the DOM right after the video controls.
 * The element is inserted as the first child of the element with a class name that starts with "ytp-right-controls".
 * If no such element is found, the element is appended to the end of the parent element.
 */
const handleDocumentMutations = () => {
    const entity = document.querySelector('[class^="ytp-right-controls"]');
    if (entity) {
        const image = document.createElement("img");
        image.src = _helper_imageLink__WEBPACK_IMPORTED_MODULE_0__.youTubeIconLink;
        image.style.marginBottom = "15px";
        image.style.marginRight = "10px";
        image.style.cursor = "pointer";
        image.style.width = "20px";
        image.style.height = "20px";
        image.onclick = () => handleDataScraping();
        const firstChilde = entity.firstChild;
        if (firstChilde) {
            entity.insertBefore(image, firstChilde);
        }
        else {
            entity.appendChild(image);
        }
    }
};
const handleStorePointerOnVideoLoad = () => {
    chrome.storage.local.get("youtubeBookmarks", (result) => {
        if (result.youtubeBookmarks) {
            (0,_helper_injectComponent__WEBPACK_IMPORTED_MODULE_1__.multipleInjectPointer)(result.youtubeBookmarks);
        }
    });
};
handleStorePointerOnVideoLoad();
handleDocumentMutations();

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudF9zY3JpcHRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBTyx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQ0xBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0Isd0JBQXdCLFNBQVMsS0FBSztBQUN0Qyw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyw0QkFBNEI7QUFDakUsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMOzs7Ozs7O1VDakNBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDdEJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EseUNBQXlDLHdDQUF3QztXQUNqRjtXQUNBO1dBQ0E7Ozs7O1dDUEE7Ozs7O1dDQUE7V0FDQTtXQUNBO1dBQ0EsdURBQXVELGlCQUFpQjtXQUN4RTtXQUNBLGdEQUFnRCxhQUFhO1dBQzdEOzs7Ozs7Ozs7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ3NEO0FBQ21DO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0EsUUFBUSw4RUFBcUI7QUFDN0I7QUFDQTtBQUNBLGlDQUFpQyxnQ0FBZ0M7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVywyQkFBMkI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw4REFBZTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxZQUFZLDhFQUFxQjtBQUNqQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaGVscGVyL2ltYWdlTGluay50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2hlbHBlci9pbmplY3RDb21wb25lbnQudHN4Iiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovLy8uL3NyYy9jb250ZW50L2NvbnRlbnRfc2NyaXB0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgeW91VHViZUljb25MaW5rID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBTHdBQUFDVUNBTUFBQUFlYUxQQ0FBQUF5VkJNVkVYLy8vLy9MazBlRjBrZEZrb2dGa3V6c3IwU0VqVHlNRTBURkVsdkhrb0FBQUQ3Ky9zUkZVbEFGa25ZTFU3Ly8vMEFBREVBRWtnQUFDdXRyTFB1N2ZJVkMwYTd1Y1VWRlMzMTlmZWpvYTBBQUJJY0hDZi9ObEFmRTBzRkFEb3hMME1OQXpnb0ZraGdHMG5RTEUyc0owNlZJVWtJRUVwS0dFbmdNRXhYRjBneEZrZ1JCajA4UEZNQUFDZDBjM3E0S0V5UWtKTEN3Y2NBRkVSVVZHSGg0T1hSME5nQUFDRVJBRU1lR3pxRWdwRmxaSFdQSkU1SlNWb0FBQm1YbHA5QVBrOG1KVDk3SFVqQktVbXdQVkYxQUFBRTcwbEVRVlI0bk8yY0RWZmFNQlNHWTVMWllpdWxJSzZ5VnBDUEFuYkNFQkRZR0lyLy8wZnRKbTNwL0VLMmxkRE8rNTZEcUxUMTZlWG1KaS9IWEVKUUtCUUtoVUtoVUNqVWg1S3hCeW5BdGtCR3BYNlN1dW9WUTF4Nzd6ZHdVV3N3emxKV28zYXhkM0NJemRtWEtxZHBzMU5lL1hKRzloeDV1UHo1WjBZcFQxbHd4Yy9uKzRZSGZUcm1rRFh3NStBZTBwQUloYmpnOGFkOWs4ZndIaVJPU3JranJ1UXBoUmNSTTFPU2VBZFZ3a093Nk5WcFNycWk0ajFVQ204Mlc4VlUxR3FhYXVFNW8zcEJPMHBGV2tHbmFnY3N3aVA4bjhPenRPRnh3Q0k4d2lNOHdtY0tIdXY4Ny9DWU5oOENucWNMenpIeXU4TFRkT0dWR3ZCOFJ6N1BPWi92U1FwelBvSEhTUXJoRVI3aEVSN2hFUjdoRWY1RHd1ZlpqT1E3OHJrMkk1ZzJDVHhXRzRSSGVJUkhlSVJIZUlSSCtMK0Z4MVZsQW85bVpHZjRYRWNlY3o2QngxS0o4UDhCdkJzK29xZWN3V3V1cTdVN25iWjR6aDI4NnhZTHZtMzdoYUtidjhnZkZiczIxRzlxZDR2Ymo4c2d2TnYyNVQ5endJRisyOTJXOTltRDF6cTJ6dVVHUXM1MXU2UGxDYjVYc0pNOVlKVGFoZDZXKzh3WWZLdHZpNFZpSkU2NTNXOWxIVjZXRmRkMWg5ZW1TSmQ0ODU5SUgvTjY2RVl2WnhRK3ZJT2pqbTZLZGFkWTlYc2VqYjQxYnp0djVIMVd6SWlvS2hxa3U5emdDc0VQdm40TnhMTk1mNytndlZwMU1tUkdpbjAvM0NJS1I5d01KcFBCalM3dkJHN1g3NzlhOFROalJ0d2h6RXhpanlnOGd0STNoeERuV3lrSWY0YWkweDIra2prWk1DT3VISW9kVDVjN1hHR1lCc2NydWFQZVdCMEhjc3N1dktCN25mRFE3T1c4Ry8ySHBNRDNMaDlHOFFtamgwc3YvajJjNVQ0ck9ObkkrZDdwTGVQaHJNVEw0d2toY2tjM2ZKbU15MXp1ZVFYRzI5UG44MVVHU2lWVTkxUFRvK0crM0tBME9BUHFDTjRpWndPUitFeHVPVGF2SHpNRkw5SkFhM016M3RFOW02K2VuN1I2bUlYREZ1YXJxL1lUaDNMb3lJUGZLSENUUmgwTVN2Zm54dE1tQUpabG5OK1h3dFJoMU9ScjdiZThQemg4cituVENJM2ZMS2NreXZjTlBEeW15M0k0V1ZHbTI4MWVadUJkOEIxeFVuaDNZNGU4Nkw0Z2ZuYkdkMTdjSzhEc0ZqT1NOb252RU9tK2VQdk14WHhHdlkxRGlmUCtvUENKNzZEc3NsNXgzdXFWWWxsT3BYNFp2aitoUTNFUEhubndIVFNhZ25ocFBOcDZxalVhbDNqY1p3SWN5cUVqWCt6SG5vbnkydmVKWWJ6ZGJFUzhKWlB2dFlRK1hLaXBYOXR3WnNxSmZzaE1XTFZMMzFFOVdUaGtlNXNVb0hjV0oxVTVXY0ZLMzJTUHNzcUs1Yi9TdFkyRVAvcGhtOUpxd0Nvem1GZkl5ekx6QXA2UXlqeWcwVW1tL1VORUh1NWZKVHpFRHVDMXRTMUdxdlFkamVYSXN0NEpQQWtyL21qWmlCd0twLzY2QjJrakVrOXB6cHZyVmpPeTJjRHhjekFseG51Qmw2L0RFZFBCejlpYVU3L1pXdXRNOGFxU3NXN2ZEcGZ1aklhK2c1QmRJaThPZWVKUStsMXhHMnB6bnV0NjlLa01EY29yNTgrdTRhektpVVBSdWVMSTA4M25NdFNiMVVmdmgveXBMREtxejJLSHdoVTM1NUcxTVdKUGZNZnVDaDFLUkU5VncyLzZNUVdOeEhmc3J0Q2hOSUxOWjRMSzRjVjRxODVYZjkyNHpsak5OdzVGYVoyUGZVZjl1ZS9ZWGNLaDFFdHNzekJTSEhsK2MvL0NkK3d1NlZEdUk0ZWllRzNET0F4VmcveERzMEJ4cWdIRFZsbmtaZnM3VVIwbzMrbzdkdGZpb1JwKzZMRC85bmR4NDBGS2hlLzQ5NzhHeTh6SW9TaG9QQ2gwVVFzb3UxdE9VK3FQYVV5WFlHN1Z0SHlNbW0wdUp1OHZ3M2E4SUprczFEWGJsRzFPTTM1QkZBcUZRcUZRS0JRS2xYWDlBdmRPb1ZmM1drZGRBQUFBQUVsRlRrU3VRbUNDJztcbmV4cG9ydCBjb25zdCBwbGF5SW1hZ2VVcmwgPSAnLi4vYXNzZXRzL3Jlc291cmNlL3BsYXkucG5nJztcbmV4cG9ydCBjb25zdCBwYXVzZUltYWdlVXJsID0gJy4uL2Fzc2V0cy9yZXNvdXJjZS9wYXVzZS5wbmcnO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUltYWdlVXJsID0gJy4uL2Fzc2V0cy9yZXNvdXJjZS9kZWxldGUucG5nJztcbmV4cG9ydCBjb25zdCBjbG9zZUltYWdlVXJsID0gJy4uL2Fzc2V0cy9yZXNvdXJjZS9jbG9zZS5wbmcnO1xuZXhwb3J0IGNvbnN0IHJpZ2h0ZXJJbWFnZVVybCA9ICcuLi9hc3NldHMvcmVzb3VyY2UvY29yZWN0ZS5wbmcnO1xuIiwiZXhwb3J0IGNvbnN0IGhhbmRsZUJvb2tNYXJrUG9pbnRlciA9IChwb3NpdGlvbikgPT4ge1xuICAgIGNvbnNvbGUubG9nKHBvc2l0aW9uKTtcbiAgICBsZXQgcHJvZ3Jlc3NCYXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnl0cC1wcm9ncmVzcy1iYXItY29udGFpbmVyXCIpO1xuICAgIGxldCBkb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRvdC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBkb3Quc3R5bGUudG9wID0gXCIwcHhcIjsgLy8gQWxpZ24gaXQgdG8gdGhlIHRvcCBvZiB0aGUgcHJvZ3Jlc3MgYmFyXG4gICAgZG90LnN0eWxlLmxlZnQgPSBgJHtwb3NpdGlvbn1weGA7IC8vIFBsYWNlIHRoZSBkb3QgYXQgdGhlIGNvcnJlY3QgcG9zaXRpb25cbiAgICBkb3Quc3R5bGUud2lkdGggPSBcIjNweFwiOyAvLyBEb3Qgc2l6ZVxuICAgIGRvdC5zdHlsZS5oZWlnaHQgPSBcIjVweFwiO1xuICAgIGRvdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInllbGxvd1wiO1xuICAgIGRvdC5zdHlsZS56SW5kZXggPSBcIjEwXCI7IC8vIEVuc3VyZSBpdCdzIGFib3ZlIHRoZSBwcm9ncmVzcyBiYXJcbiAgICAvLyBBcHBlbmQgdGhlIGRvdCB0byB0aGUgcHJvZ3Jlc3MgYmFyIGNvbnRhaW5lclxuICAgIHByb2dyZXNzQmFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGRvdCk7XG59O1xuZXhwb3J0IGNvbnN0IG11bHRpcGxlSW5qZWN0UG9pbnRlciA9IChkYXRhKSA9PiB7XG4gICAgZGF0YS5mb3JFYWNoKChib29rbWFyaykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhib29rbWFyayk7XG4gICAgICAgIC8vIFNlbmQgYSBtZXNzYWdlIHRvIGJhY2tncm91bmQgc2NyaXB0IHRvIGdldCB0aGUgY3VycmVudCB0YWIgVVJMXG4gICAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHsgYWN0aW9uOiAnZ2V0Q3VycmVudFRhYlVybCcgfSwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGFiVXJsID0gcmVzcG9uc2UudXJsOyAvLyBHZXQgdGhlIHRhYiBVUkwgZnJvbSB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgIGxldCBib29rTWFya1VybCA9IGJvb2ttYXJrLnVybDtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhbnkgdGltZXN0YW1wIHBhcmFtZXRlcnMgZnJvbSBib3RoIHRoZSBjdXJyZW50IHRhYiBVUkwgYW5kIHRoZSBib29rbWFyayBVUkxcbiAgICAgICAgICAgIGlmICh0YWJVcmwgPT09IG51bGwgfHwgdGFiVXJsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0YWJVcmwuaW5jbHVkZXMoXCImdFwiKSkge1xuICAgICAgICAgICAgICAgIHRhYlVybCA9IHRhYlVybC5zcGxpdChcIiZ0XCIpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm9va01hcmtVcmwgPSBib29rTWFya1VybC5zcGxpdChcIiZ0XCIpWzBdO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGFiVXJsLCBib29rTWFya1VybCk7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgVVJMcyBtYXRjaFxuICAgICAgICAgICAgaWYgKHRhYlVybCA9PT0gYm9va01hcmtVcmwpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVCb29rTWFya1BvaW50ZXIoYm9va21hcmsucG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8qKlxuICogU2NyYXBlcyBZb3VUdWJlIHZpZGVvIHBsYXllciBkYXRhIChjdXJyZW50IHRpbWVzdGFtcCwgdmlkZW8gZHVyYXRpb24sIGFuZCBzZWVrIGJhciBwb3NpdGlvbikgYW5kIHNlbmRzIGl0IHRvIHRoZSBiYWNrZ3JvdW5kIHNjcmlwdCB2aWEgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UuXG4gKiBUaGUgZGF0YSBpcyBzY3JhcGVkIGZyb20gdGhlIFlvdVR1YmUgdmlkZW8gcGxheWVyJ3MgcHJvZ3Jlc3MgYmFyIGFuZCBzZWVrIGJhciBlbGVtZW50cy5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5pbXBvcnQgeyB5b3VUdWJlSWNvbkxpbmsgfSBmcm9tIFwiLi4vaGVscGVyL2ltYWdlTGlua1wiO1xuaW1wb3J0IHsgaGFuZGxlQm9va01hcmtQb2ludGVyLCBtdWx0aXBsZUluamVjdFBvaW50ZXIgfSBmcm9tIFwiLi4vaGVscGVyL2luamVjdENvbXBvbmVudFwiO1xuY29uc3QgaGFuZGxlRGF0YVNjcmFwaW5nID0gKCkgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIG1pblZhbHVlOiBcIlwiLFxuICAgICAgICBtYXhWYWx1ZTogXCJcIixcbiAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgIGR1cmF0aW9uOiBcIlwiLFxuICAgICAgICBwb3NpdGlvbjogXCJcIixcbiAgICB9O1xuICAgIGNvbnN0IHRpbWVUcmFja2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tjbGFzcz1cInl0cC1wcm9ncmVzcy1iYXJcIl0nKTtcbiAgICBpZiAodGltZVRyYWNrZXJFbGVtZW50KSB7XG4gICAgICAgIGRhdGEubWluVmFsdWUgPSB0aW1lVHJhY2tlckVsZW1lbnQuYXJpYVZhbHVlTWluIHx8IFwiXCI7XG4gICAgICAgIGRhdGEubWF4VmFsdWUgPSB0aW1lVHJhY2tlckVsZW1lbnQuYXJpYVZhbHVlTWF4IHx8IFwiXCI7XG4gICAgICAgIGRhdGEudmFsdWUgPSB0aW1lVHJhY2tlckVsZW1lbnQuYXJpYVZhbHVlTm93IHx8IFwiXCI7XG4gICAgICAgIGRhdGEuZHVyYXRpb24gPSB0aW1lVHJhY2tlckVsZW1lbnQuYXJpYVZhbHVlVGV4dCB8fCBcIlwiO1xuICAgIH1cbiAgICBjb25zdCBwb3NpdGlvblRyYWNrZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2NsYXNzXj1cInl0cC1wbGF5LXByb2dyZXNzIHl0cC1zd2F0Y2gtYmFja2dyb3VuZC1jb2xvclwiXScpO1xuICAgIGlmIChwb3NpdGlvblRyYWNrZXJFbGVtZW50KSB7XG4gICAgICAgIGxldCB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ2aWRlb1wiKTtcbiAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gdmlkZW8uY3VycmVudFRpbWU7XG4gICAgICAgIGxldCBwcm9ncmVzc0JhckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIueXRwLXByb2dyZXNzLWJhci1jb250YWluZXJcIik7XG4gICAgICAgIGxldCBwcm9ncmVzc0JhcldpZHRoID0gcHJvZ3Jlc3NCYXJDb250YWluZXIub2Zmc2V0V2lkdGg7XG4gICAgICAgIGxldCB2aWRlb0R1cmF0aW9uID0gdmlkZW8uZHVyYXRpb247IC8vIEdldCB0aGUgdmlkZW8gZHVyYXRpb25cbiAgICAgICAgbGV0IHBvc2l0aW9uID0gKGN1cnJlbnRUaW1lIC8gdmlkZW9EdXJhdGlvbikgKiBwcm9ncmVzc0JhcldpZHRoO1xuICAgICAgICBjb25zb2xlLmxvZyhwb3NpdGlvbiwgXCJwb3NpdGlvblwiLCBjdXJyZW50VGltZSwgdmlkZW8sIHByb2dyZXNzQmFyQ29udGFpbmVyKTtcbiAgICAgICAgaGFuZGxlQm9va01hcmtQb2ludGVyKHBvc2l0aW9uKTtcbiAgICAgICAgZGF0YS5wb3NpdGlvbiA9IHBvc2l0aW9uLnRvU3RyaW5nKCkgfHwgXCJcIjtcbiAgICB9XG4gICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UoeyB0eXBlOiBcInNjcmFwZURhdGFcIiwgZGF0YTogZGF0YSB9KTtcbn07XG4vKipcbiAqIENyZWF0ZXMgYW5kIHBsYWNlcyBhIHllbGxvdyBkb3Qgb24gdGhlIFlvdVR1YmUgdmlkZW8gcHJvZ3Jlc3MgYmFyIGF0IGEgc3BlY2lmaWVkIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9ncmVzc0JhckNvbnRhaW5lciAtIFRoZSBjb250YWluZXIgZWxlbWVudCBvZiB0aGUgcHJvZ3Jlc3MgYmFyIHdoZXJlIHRoZSBkb3Qgd2lsbCBiZSBhcHBlbmRlZC5cbiAqIEBwYXJhbSB7bnVtYmVyIHwgR0xmbG9hdCB8IHN0cmluZ30gcG9zaXRpb24gLSBUaGUgcG9zaXRpb24gb24gdGhlIHByb2dyZXNzIGJhciB3aGVyZSB0aGUgZG90IHNob3VsZCBiZSBwbGFjZWQuXG4gKiBUaGUgcG9zaXRpb24gY2FuIGJlIGEgbnVtYmVyLCBHTGZsb2F0LCBvciBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwaXhlbCBvZmZzZXQgZnJvbSB0aGUgbGVmdC5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGFuIGltYWdlIGVsZW1lbnQgd2l0aCBhIFlvdVR1YmUgYm9va21hcmsgaWNvbiBhbmQgaW5zZXJ0cyBpdCBpbnRvIHRoZSBET00gcmlnaHQgYWZ0ZXIgdGhlIHZpZGVvIGNvbnRyb2xzLlxuICogVGhlIGVsZW1lbnQgaXMgaW5zZXJ0ZWQgYXMgdGhlIGZpcnN0IGNoaWxkIG9mIHRoZSBlbGVtZW50IHdpdGggYSBjbGFzcyBuYW1lIHRoYXQgc3RhcnRzIHdpdGggXCJ5dHAtcmlnaHQtY29udHJvbHNcIi5cbiAqIElmIG5vIHN1Y2ggZWxlbWVudCBpcyBmb3VuZCwgdGhlIGVsZW1lbnQgaXMgYXBwZW5kZWQgdG8gdGhlIGVuZCBvZiB0aGUgcGFyZW50IGVsZW1lbnQuXG4gKi9cbmNvbnN0IGhhbmRsZURvY3VtZW50TXV0YXRpb25zID0gKCkgPT4ge1xuICAgIGNvbnN0IGVudGl0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tjbGFzc149XCJ5dHAtcmlnaHQtY29udHJvbHNcIl0nKTtcbiAgICBpZiAoZW50aXR5KSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgaW1hZ2Uuc3JjID0geW91VHViZUljb25MaW5rO1xuICAgICAgICBpbWFnZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjE1cHhcIjtcbiAgICAgICAgaW1hZ2Uuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjEwcHhcIjtcbiAgICAgICAgaW1hZ2Uuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgIGltYWdlLnN0eWxlLndpZHRoID0gXCIyMHB4XCI7XG4gICAgICAgIGltYWdlLnN0eWxlLmhlaWdodCA9IFwiMjBweFwiO1xuICAgICAgICBpbWFnZS5vbmNsaWNrID0gKCkgPT4gaGFuZGxlRGF0YVNjcmFwaW5nKCk7XG4gICAgICAgIGNvbnN0IGZpcnN0Q2hpbGRlID0gZW50aXR5LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmIChmaXJzdENoaWxkZSkge1xuICAgICAgICAgICAgZW50aXR5Lmluc2VydEJlZm9yZShpbWFnZSwgZmlyc3RDaGlsZGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW50aXR5LmFwcGVuZENoaWxkKGltYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5leHBvcnQgY29uc3QgaGFuZGxlU3RvcmVQb2ludGVyT25WaWRlb0xvYWQgPSAoKSA9PiB7XG4gICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KFwieW91dHViZUJvb2ttYXJrc1wiLCAocmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQueW91dHViZUJvb2ttYXJrcykge1xuICAgICAgICAgICAgbXVsdGlwbGVJbmplY3RQb2ludGVyKHJlc3VsdC55b3V0dWJlQm9va21hcmtzKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmhhbmRsZVN0b3JlUG9pbnRlck9uVmlkZW9Mb2FkKCk7XG5oYW5kbGVEb2N1bWVudE11dGF0aW9ucygpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9